---
# Front matter
lang: ru-RU
title: "Отчёт по лабораторной работе №8"
subtitle: "Командная оболочка Midnight Commander"
author: "Матвеева Анастасия Сергеевна"

# Formatting
toc-title: "Содержание"
toc: true # Table of contents
toc_depth: 2
lof: true # List of figures
;lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: true
pdf-engine: lualatex
header-includes:
  - \linepenalty=10 # the penalty added to the badness of each line within a paragraph (no associated penalty node) Increasing the value makes tex try to have fewer lines in the paragraph.
  - \interlinepenalty=0 # value of the penalty (node) added after each line of a paragraph.
  - \hyphenpenalty=50 # the penalty for line breaking at an automatically inserted hyphen
  - \exhyphenpenalty=50 # the penalty for line breaking at an explicit hyphen
  - \binoppenalty=700 # the penalty for breaking a line at a binary operator
  - \relpenalty=500 # the penalty for breaking a line at a relation
  - \clubpenalty=150 # extra penalty for breaking after first line of a paragraph
  - \widowpenalty=150 # extra penalty for breaking before last line of a paragraph
  - \displaywidowpenalty=50 # extra penalty for breaking before last line before a display math
  - \brokenpenalty=100 # extra penalty for page breaking after a hyphenated line
  - \predisplaypenalty=10000 # penalty for breaking before a display
  - \postdisplaypenalty=0 # penalty for breaking after a display
  - \floatingpenalty = 20000 # penalty for splitting an insertion (can only be split footnote in standard LaTeX)
  - \raggedbottom # or \flushbottom
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Освоение основных возможностей командной оболочки Midnight Commander. Приобретение навыков практической работы по просмотру каталогов и файлов; манипуляций с ними.

# Задачи лабораторной работы
Задачи:

1. Изучить потоки ввода и вывода.
2. Изучить конвейер.
3. Изучить команду поиска файлов.
4. Изучить команду, позволяющую найти указанную строку символов.
5. Изучить команды по проверке использования диска.
6. В ходе работы использовать эти команды и интерпретировать их вывод.
# Выполнение лабораторной работы

>> Задание по mc

1. Изучаем информацию о mc, вызвав в командной строке «man mc». Midnight Commander (или mc) − псевдографическая командная оболочка для UNIX/Linux систем. (рис. -@fig:001, -@fig:002) 

![Команда man mc](image/01.png){ #fig:001 width=70% }

![Информация о mc](image/02.png){ #fig:002 width=70% }

2. Запустим из командной строки mc и изучим его структуру и меню. (рис. -@fig:003) 

![Запуск mc](image/03.png){ #fig:003 width=70% }

В стандартном состояние окно редактора состоит из двух панелей. (рис. -@fig:004)

![Окно редактора](image/04.png){ #fig:004 width=70% }

Верхнее меню содержит меню «Левая панель», «Файл», «Команда», «Настройки», «Правая панель». (рис. -@fig:005, -@fig:006, -@fig:007, -@fig:008, -@fig:009)

![Левая панель](image/05.png){ #fig:005 width=70% }


![Файл](image/06.png){ #fig:006 width=70% }


![Команда](image/07.png){ #fig:007 width=70% }


![Настройки](image/08.png){ #fig:008 width=70% }


![Правая панель](image/09.png){ #fig:009 width=70% }
 
 
Нажав клавишу «F2», можно открыть «Меню пользователя». (рис. -@fig:010)
   
![Помощь](image/10.png){ #fig:010 width=70% } 
   
Нажав клавишу «F1», можно открыть «Помощь». (рис. -@fig:011)

![Меню пользователя](image/11.png){ #fig:011 width=70% } 

3. Выполним несколько операций в mc, используя управляющие клавиши


- Выделение/отмена выделения файлов. Используем клавишу «ins» и выделяем необходимые файлы. Для выделения файлов или его отмены можно использовать также пункты «Отметить группу», «Снять отметку», «Обратить выделение» в меню «Файл». (рис. -@fig:012, -@fig:013) 

![Выделение файлов](image/12.png){ #fig:012 width=70% } 

![Необходимые пункты меню Файл](image/13.png){ #fig:013 width=70% } 


- Копирование/перемещение файлов. Для копирования файла используются клавишу «F5». Для перемещения файла используются клавишу «F6». (рис. -@fig:014, -@fig:015) 

![Копирование файлов](image/14.png){ #fig:014 width=70% } 

![Перемещение файлов](image/15.png){ #fig:015 width=70% } 


- Получение информации о размере и правах доступа на файлы и/или каталоги.Для получения данной информации можно перейти в пункты: «Левая панель» - «Информация», «Левая панель» - «Формат списка» - «Расширенный», «Файл» - «Права доступа», «Файл» - «Права (расширенные). (рис. -@fig:016, -@fig:017, -@fig:018, -@fig:019, -@fig:020, -@fig:021, -@fig:022, -@fig:023, -@fig:024)

![Левая панель](image/16.png){ #fig:016 width=70% } 


![Информация](image/17.png){ #fig:017 width=70% } 


![Левая панель](image/18.png){ #fig:018 width=70% } 


![Формат списка](image/19.png){ #fig:019 width=70% } 


![Формат списка(расширенный)](image/20.png){ #fig:020 width=70% }


![Файл)](image/21.png){ #fig:021 width=70% }


![Права доступа](image/22.png){ #fig:022 width=70% }


![Файл)](image/23.png){ #fig:023 width=70% }


![Права(расширенные)](image/24.png){ #fig:024 width=70% }


4. Выполним основные команды меню правой панели. (рис. -@fig:025)

![Правая панель](image/25.png){ #fig:025 width=70% }

- Пункт «Список файлов» отображает размер файла и время его правки. (рис. -@fig:026)

![Правая панель](image/26.png){ #fig:026 width=70% }

- Пункт «Быстрый просмотр» необходим для предпросмотра содержания файла. (рис. -@fig:027)

![Быстрый просмотр](image/27.png){ #fig:027 width=70% }

- Пункт «Информация» отображает подробные данные о файле. (рис. -@fig:028)

![Информация](image/28.png){ #fig:028 width=70% }

- Пункт «Дерево» необходим для просмотра дерева каталога. (рис. -@fig:029)

![Дерево](image/29.png){ #fig:029 width=70% }

- Пункт «Формат списка» − «Укороченный» отображает только имя файла или каталога. (рис. -@fig:030)

![Формат списка "Укороченный"](image/30.png){ #fig:030 width=70% }

- Пункт «Формат списка» − «Расширенный» отображает подробную информацию о файлах. (рис. -@fig:031)

![Формат списка "Расширенный"](image/31.png){ #fig:031 width=70% }

- Пункт «Формат списка» − «Определенный пользователем» предоставляет пользователю возможность самому изменять степень подробности информации о файле.

- Пункт «Формат списка» − «Стандартный» ставится по умолчанию.

- Пункт «Порядок сортировки» необходим для сортировки файлов или каталогов по конкретному критерию. (рис. -@fig:032)

![Порядок сортировки](image/32.png){ #fig:032 width=70% }

- Пункт «Фильтр» необходим, чтобы просматривать название файлов или каталогов, которые подходят под указанную маску. (рис. -@fig:033)

![Фильтр](image/33.png){ #fig:033 width=70% }

5. Используя возможности подменю «Файл», выполним: (рис. -@fig:034)

![Подменю файл](image/34.png){ #fig:034 width=70% }

- Просмотр содержимого текстового файла. Выберем текстовый файл и перейдем в пункт «Просмотр». (рис. -@fig:035)

![Просмотр файла](image/35.png){ #fig:035 width=70% }

- Редактирование содержимого текстового файла (без сохранения результатов редактирования). Перейдем в пункт «Правка» и изменим текст. (рис. -@fig:036)

![Редакторование файла](image/37.png){ #fig:036 width=70% }

- Создание каталога. Перейдем в пункт «Создание каталога» и создадим каталог Nastya. (рис. -@fig:037)

![Создание каталога](image/38.png){ #fig:037 width=70% }

- Копируем файл в созданный каталог. Для этого, используя клавишу ins, выделим несколько файлов. Затем выберем пункт "Копирование", скопруем данный файлы в созданный каталог. (рис. -@fig:038, -@fig:039, -@fig:039)

![Использование клавиши ins](image/39.png){ #fig:038 width=70% }

![Копирование файла](image/40.png){ #fig:039 width=70% }

![Проверка копирования](image/41.png){ #fig:040 width=70% }


6. С помощью соответствующих средств подменю «Команда» выполним: (рис. -@fig:041)

![Команда](image/42.png){ #fig:041 width=70% }


- Поиск в файловой системе файла с заданными условиями. Перейдем в пункт «Поиск файла» и зададим следующие параметры: «От каталога» /, «Шаблон имени» *.с, «Содержимое» main, выполним поиск. (рис. -@fig:042) (рис. -@fig:043)

![Задаем параметры](image/43.png){ #fig:042 width=70% }

![Поиск](image/44.png){ #fig:043 width=70% }

  Аналогичным способом найдем файлы с шаблоном имени *.cpp. (рис. -@fig:044) (рис. -@fig:045)

![Задаем параметры](image/45.png){ #fig:044 width=70% }

![Поиск](image/46.png){ #fig:045 width=70% }


- Выбор и повторение одной из предыдущих команд.Перейдем в пункт «История командной строки» и увидим, что внизу экрана появилась сноска «История», выполним одну из предыдущих команд. (рис. -@fig:046)

![История](image/47.png){ #fig:046 width=70% }


- Переход в  каталог. Для перехода в каталог Nastya перейдем в пункт «Дерево
каталогов», выберем необходимый каталог и нажмем «enter», в результате чего перейдем в нужный каталог. (рис. -@fig:047, -@fig:048)

![Переход в домашний каталог](image/48.png){ #fig:047 width=70% }

![Домашний каталог](image/49.png){ #fig:048 width=70% }

- Анализ файла меню и файла расширений. Перейдем в пункт «Редактировать файл расширений». "Редактировать файл расширений" − позволяет задать с помощью определённого синтаксиса действия при запуске файлов с определённым расширением. (рис. -@fig:049)

![Редактор файла расширений](image/50.png){ #fig:049 width=70% }

Пункт «Редактировать файл меню» − позволяет отредактировать контекстное меню пользователя. (рис. -@fig:050) (рис. -@fig:051)

![Редактор файла меню](image/51.png){ #fig:050 width=70% }

![Редактор файла меню](image/52.png){ #fig:051 width=70% }


7. Вызовем подменю «Настройки". Освоим операции, определяющие структуру экрана mc: 

![Настройки](image/53.png){ #fig:052 width=70% }

- Перейдем в пункт «Конфигурация». Этот пункт позволяет скорректировать настройки работы с
панелями. (рис. -@fig:053)

![Конфигурация](image/54.png){ #fig:053 width=70% }

- Перейдем в пункт «Внешний вид», а затем в пункт «Настройки панелей».

Данные пункты определяют элементы, отображаемые при вызове mc, а также геометрию расположения панелей и цветовыделение. (рис. -@fig:054) (рис. -@fig:055)

![Внешний вид](image/55.png){ #fig:054 width=70% }

![Настройка панели](image/56.png){ #fig:055 width=70% }

- Перейдем в пункт «Подтверждение». Этот пункт позволяет установить или убрать вывод окна с запросом подтверждения действий при операциях удаления и перезаписи файлов, а также при выходе из программы. (рис. -@fig:056)

![Подтверждение](image/57.png){ #fig:056 width=70% }

- Перейдем в пункт "Оформление". Данный пункт позволяет поменять цыетовую гамму визуальной оболочки для комфортной работы. (рис. -@fig:057)

![Отображение символов](image/58.png){ #fig:057 width=70% }

- Перейдем в пункт «Биты символов».Этот пункт задаёт формат обработки информации локальным
терминалом. (рис. -@fig:058)

![Отображение символов](image/59.png){ #fig:058 width=70% }

- Перейдем в пункт «Распознавание клавиш».Данное диалоговое окно используется для тестирования функциональных клавиш, клавиш управления курсором и прочее. (рис. -@fig:059)

![Распознавание клавиш](image/60.png){ #fig:059 width=70% }

- Перейдем в пункт «Виртуальные ФС» . Это настройки виртуальной файловой системы: тайм-аут, пароль и прочее. (рис. -@fig:060)

![Виртуальные ФС](image/61.png){ #fig:060 width=70% }

- Перейдем в пункт «Сохранить настройки».Данный пункт сохранит все изменения. (рис. -@fig:061)

![Сохранение изменений](image/62.png){ #fig:061 width=70% }


>> Задание по встроенному редактору mc

1. С помощью команды «touch text.txt» создаем текстовой файл text.txt. Командой «ls» проверяем правильность выполненных действий. (рис. -@fig:062)

![Создаем файл](image/63.png){ #fig:062 width=70% }

2. Открываем этот файл с помощью встроенного mc редактора командой «mcedit text.txt». (рис. -@fig:063) 

![Открываем файл](image/64.png){ #fig:063 width=70% }

3. Вставим небольшой фагмент текста из интернета. (рис. -@fig:064)

![Текст](image/65.png){ #fig:064 width=70% }

4. 

- Удаляем 10-ю строку текста с помощью клавиши «F8». (рис. -@fig:065, -@fig:066)

![Удаление строки](image/66.png){ #fig:065 width=70% }

![Удаление строки](image/67.png){ #fig:066 width=70% }

- Выделим фрагмент текста, нажав «F3» для начала выделения текста и для его окончания, и скопируем его на новую строку, используя клавишу «F5». (рис. -@fig:067, -@fig:068)

![Изменение текста](image/68.png){ #fig:067 width=70% }

![Изменение текста](image/69.png){ #fig:068 width=70% }

- Выделим фрагмент текста и перенесем его на новую строку с помощью клавиши «F6». (рис. -@fig:069)

![Изменение текста](image/70.png){ #fig:069 width=70% }

- Сохраним файл, нажав «F2». (рис. -@fig:070)

![Сохранение текста](image/71.png){ #fig:070 width=70% }

- Отменим последнее действие с помощью клавиш «ctrl»+«u». (рис. -@fig:071)

![Отмена действий](image/72.png){ #fig:071 width=70% }

- Перейдем в конец файла, нажав клавиши «ctrl»+«end» (переход в конец файла) и «ctrl»+«x» (переход в конец следующего слова) и напишем следующий текст «Сакура». (рис. -@fig:072, -@fig:073)

![Изменение конца текста](image/73.png){ #fig:072 width=70% }

![Изменение конца текста](image/74.png){ #fig:073 width=70% }

- Перейдем в начало файла, нажав клавиши «ctrl»+«home» (переход в начало файла) и «ctrl»+«z» (переход в начало следующего слова) и напишем следующий текст «Континент». (рис. -@fig:074, -@fig:075)

![Изменение начала текста](image/75.png){ #fig:074 width=70% }

![Изменение начала текста](image/76.png){ #fig:075 width=70% }

- Выполним сохранение файла (клавиша «F2») и выход из него (клавиша «F10»). (рис. -@fig:076)

![Сохраняем файл](image/77.png){ #fig:076 width=70% }

5. Откроем файл с исходным текстом на некотором языке программирования. Откроем файл в редакторе mc с помощью команды «mcedit /afs/.dk.sci.pfu.edu.ru/home/a/s/asmatveeva/Загрузки/String31.cpp». (рис. -@fig:077, -@fig:078)

![Открываем файл](image/78.png){ #fig:077 width=70% }

![Открываем файл](image/80.png){ #fig:078 width=70% }

6. Используя меню редактора «Команда» - «Включить/Выключить подсветку синтаксиса», выключим подсветку синтаксиса. (рис. -@fig:079) (рис. -@fig:080)

![Команда](image/81.png){ #fig:079 width=70% }

![Подсветка отключена](image/82.png){ #fig:080 width=70% }


# Выводы

В ходе выполнения данной лабораторной работы я освоила основные возможности командной оболочки Midnight Commander и приобрела навыки практической работы по просмотру каталогов и файлов; манипуляций с ними.


# Ответы на контрольные вопросы

1) Панели могут дополнительно быть переведены в один из двух режимов: «Информация» или «Дерево». В режиме «Информация» на панель выводятся сведения о файле и текущей файловой системе, расположенных на активной панели. В режиме «Дерево» на одной из панелей выводится структура дерева каталогов.

2) Как с помощью команд shell, так и с помощью меню (комбинаций клавиш) mc можно выполнить следующие операции с файлами:

- копирование «F5» («cp имя_файла имя_каталога (в который копируем)») (Рисунок14)

- перемещение/переименование «F6» («mv имя_файла имя_каталога (в который перемещаем)»)(Рисунок15)

- создание каталога «F7» («mkdir имя_каталога»)(Рисунок38)

- удаление «F8» («rm имя_файла»)

- изменение прав доступа «ctrl+x» («chmod u+x имя_файла»)

3) Перейти в строку меню панелей mc можно с помощью функциональной клавиши «F9». В строке меню имеются пять меню: «Левая панель», «Файл», «Команда», «Настройки» и «Правая панель».

Под пункт меню «Быстрый просмотр» позволяет выполнить быстрый просмотр содержимого панели.

Подпункт меню «Информация» позволяет посмотреть информацию о файле или каталоге. В меню каждой (левой или правой) панели можно выбрать «Формат списка»:

- стандартный − выводит список файлов и каталогов с указанием размера и времени правки;

- ускоренный − позволяет задать число столбцов, на которые разбивается панель при выводе списка имён файлов или каталогов без дополнительной информации;

- расширенный − помимо названия файла или каталога выводит сведения о правах доступа, владельце, группе, размере, времени правки;

- определённый пользователем − позволяет вывести те сведения о файле или каталоге, которые задаст сам пользователь.

Подпункт меню «Порядок сортировки» позволяет задать критерии сортировки при выводе списка файлов и каталогов: без сортировки, по имени, расширенный, время правки, время доступа, время изменения атрибута, размер, узел.

4) Команды меню «Файл»:

- Просмотр(«F3»)− позволяет посмотреть содержимое текущего (или выделенного) файла без возможности редактирования.

- Просмотр вывода команды («М»+«!»)− функция запроса команды с параметрами (аргумент к текущему выбранному файлу).

- Правка(«F4») − открывает текущий (или выделенный) файл для его редактирования.

- Копирование(«F5»)− осуществляет копирование одного или нескольких файлов или каталогов в указанное пользователем во всплывающем окне место.

- Права доступа («Ctrl-x»«c»)− позволяет указать (изменить) права доступа к одному или нескольким файлам или каталогам.

- Жёсткая ссылка («Ctrl-x»«l»)− позволяет создать жёсткую ссылку к текущему(или выделенному) файлу.

- Символическая ссылка («Ctrl-x»«s»)− позволяет создать символическую ссылку к текущему (или выделенному) файлу.

- Владелец/группа («Ctrl-x»«o»)− позволяет задать (изменить) владельца и имя группы для одного или нескольких файлов или каталогов.

- Права(расширенные)− позволяет изменить права доступа и владения для одного или нескольких файлов или каталогов.

- Переименование («F6»)− позволяет переименовать (или переместить) один или несколько файлов или каталогов.

- Создание каталога («F7») − позволяет создать каталог.

- Удалить («F8») − позволяет удалить один или несколько файлов или каталогов.

- Выход («F10») − завершает работу mc.

5) Меню Команда

В меню Команда содержатся более общие команды для работы с mc.

Команды меню Команда:

- Дерево каталогов − отображает структуру каталогов системы.

- Поиск файла − выполняет поиск файлов по заданным параметрам.

- Переставить панели − меняет местами левую и правую панели.

- Сравнить каталоги («Ctrl-x»«d») − сравнивает содержимое двух каталогов.

- Размеры каталогов − отображает размер и время изменения каталога (по умолчанию в mc размер каталога корректно не отображается).

- История командной строки − выводит на экран список ранее выполненных в оболочке команд.

- Каталоги быстрого доступа(Ctrl-\»)− при вызове выполняется быстрая смена текущего каталога на один из заданного списка.

- Восстановление файлов − позволяет восстановить файлы на файловых системах ext2 и ext3.

- Редактировать файл расширений − позволяет задать с помощью определённого синтаксиса действия при запуске файлов с определённым расширением (например, какое программное обеспечение запускать для открытия или редактирования файлов с расширением doc или docx).

- Редактировать файл меню − позволяет отредактировать контекстное меню пользователя, вызываемое по клавише «F2».

- Редактировать файл расцветки имён − позволяет подобрать оптимальную для пользователя расцветку имён файлов в зависимости от их типа.

6) Меню Настройки содержит ряд дополнительных опций по внешнему виду и функциональности mc.

Меню Настройки содержит:

- Конфигурация − позволяет скорректировать настройки работы с панелями.

- Внешний вид и Настройки панелей − определяет элементы (строка меню, командная строка, подсказки и прочее), отображаемые при вызове mc, а также геометрию расположения панелей и цветовыделение.

- Биты символов − задаёт формат обработки информации локальным терминалом.

- Подтверждение − позволяет установить или убрать вывод окна с запросом подтверждения действий при операциях удаления и перезаписи файлов, а также при выходе из программы.

- Распознание клавиш − диалоговое окно используется для тестирования функциональных клавиш, клавиш управления курсором и прочее.

- Виртуальные ФС − настройки виртуальной файловой системы: тайм-аут, пароль и прочее.

7) Функциональные клавиши mc:

- F1 – вызов контекстно-зависимой подсказки

- F2 – вызов пользовательского меню с возможностью создания и/или дополнения дополнительных функций

- F3 – просмотр содержимого файла, на который указывает подсветка в активной панели (без возможности редактирования)

- F4 – вызов встроенного в mc редактора для изменения содержания файла, на который указывает подсветка в активной панели

- F5 – копирование одного или нескольких файлов, отмеченных впервой (активной) панели, в каталог, отображаемый на второй панели

- F6 – перенос одного или нескольких файлов, отмеченных в первой (активной) панели, в каталог, отображаемый на второй панели

- F7 – создание подкаталога в каталоге, отображаемом в активной панели

- F8 – удаление одного или нескольких файлов (каталогов), отмеченных в первой (активной) панели файлов

- F9 – вызов меню mc

- F10 – выход из mc

8) Встроенный в mc редактор вызывается с помощью функциональной клавиши «F4». В нём удобно использовать различные комбинации клавиш при редактировании содержимого (как правило текстового) файла. Клавиши для редактирования файла:

- «Ctrl-y» − удалить строку

- «Ctrl-u» − отмена последней операции

- «ins» - вставка/замена

- «F7» − поиск (можно использовать регулярные выражения)

- «|-F7» − повтор последней операции поиска

- «F4» − замена

- «F3» − первое нажатие − начало выделения, второе − окончание выделения

- «F5» − копировать выделенный фрагмент

- «F6» − переместить выделенный фрагмент

- «F8» − удалить выделенный фрагмент

- «F2» − записать изменения в файл

- «F10» − выйти из редактор

9) Для редактирования меню пользователя, которое вызывается клавишей «F2», необходимо перейти в пункт «Редактировать файл меню» - «Команда» и изменить настройки файла.

10) Часть команд «Меню пользователя», а также меню «Файл» позволяют выполнять действия, определяемые пользователем, над текущим файлом. Например, копирование каталога или файла, переименование, перемещение, архивирование.
